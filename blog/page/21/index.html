

<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title><em>Hank Beaver</em>. <br>Web developer &<br>DevOps pro.</title>
  <meta name="author" content="Hank Beaver">
  <link rel="author" href="humans.txt">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
    
  
  <meta name="description" content=" desc ">
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blasterpal.github.com/blog/page/21/">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="<em>Hank Beaver</em>. <br>Web developer &<br>DevOps pro." type="application/atom+xml">
  <meta name="og:type" content="website" />
  <meta name="og:site_name" content="<em>Hank Beaver</em>. <br>Web developer &<br>DevOps pro." />
  <meta name="og:title" content="<em>Hank Beaver</em>. <br>Web developer &<br>DevOps pro." />
  <meta name="og:description" content=" desc " />
  <meta name="og:url" content="http://blasterpal.github.com/blog/page/21/index.html"/>
  <meta name="url" content="http://blasterpal.github.com/blog/page/21/index.html">
  
  <meta name="distribution" content="global">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <div id="front-wrapper">
  <div id="hero">
    <div id="hero-inner" class="container">
      <div class="span10 offset1">
  <h1>
    <em>Hank Beaver</em>. <br>Web developer &<br>DevOps pro.
  </h1>
  <h2></h2>
</div>

    </div>
  </div>
  <section id="sub-hero">
    <div class="container">
      <div class="row">
  <div class="span4">
    <h2>About me</h2>
<p>As a jack-of-all trades IT professional, I began my career in x86
hardware and continued to reinvent myself. While also a creative, musician at
heart, I love technology.
</p>

  </div>
  <div class="span6">
    
<h2>recent public projects</h2>
<dl id="gh_repos" class="dl-horizontal" data-github-user="blasterpal" data-github-repo-count="4" data-github-skip-forks="true">
  <dd class="loading">Status updating&#8230;</dd>
</dl>
<script src="/javascripts/github.js" type="text/javascript"> </script>
<script src="/javascripts/libs/jXHR.js" type="text/javascript"> </script>


  </div>
  <div class="span2">
    <h2>found on</h2>

<a href="https://github.com/blasterpal/" rel="tooltip" title="Github"><img class="social_icon" title="Github" alt="github icon" src="/images/glyphicons_381_github.png"></a>







<a href="http://twitter.com/blastepal" rel="tooltip" title="Twitter"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>








  </div>
</div>

    </div>
  </section>
  <div class="container">
    <div class="row" id="post-container">
    
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/09/20/the-mostest-bestest-web-security-acl-idea-ever-maybe-sum-of-exponents-required/">The Mostest Bestest Web Security , ACL Idea Ever, Maybe. Sum of Exponents Required.</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Hank Beaver</span></span>
  

 - 
        








  


<time datetime="2007-09-20T14:16:28-04:00" pubdate data-updated="true">Sep 20<span>th</span>, 2007</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/rails/'>Rails</a>, <a class='category' href='/blog/categories/security/'>Security</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>REVISED:</p>

<p>ACL, privilege , permission system based on sum of exponents. {REVISED: sum of square exponents from 2 and including 1} Huh?</p>

<p>A little theory:</p>

<p>Look at this NOW: Masking</p>

<p>Idea/Premise:</p>

<p>I present the automatic bar tender. It makes sure people of age get served beverages and also people who have partial liver failure only get beer.</p>

<p>RULES:
Everyone has a number on their driver’s license. It’s a single number that can’t be forged (please assume this). it’s easy to read and easy to carry. The automatic bartender can read this simply by scanning your license. Let’s call it your “Permission Number”:</p>

<p>Permission Number Examples</p>

<pre><code>List of possible drinks, these numbers are all square exponents of 2 and including
————————

1 Drink Water
2 Drink Soda
4 Drink Beer
8 Drink Gin
</code></pre>

<p>The sum of all permission numbers in binary might be represented as:</p>

<pre><code>00001111
</code></pre>

<p>Permission numbers for our test subjects. These are created by SUMming the permission numbers.</p>

<pre><code>———————
Sara:
1 Drink Water
+ 4 Drink Beer
+ 8 Drink Gin
————
Permission Number = 13 (00001101)

Fun Bobby:
+ 4 Drink Beer
+ 8 Drink Gin
————
Permission Number = 12 (00001100)

Underage Kid:
+ 1 Drink Water
+ 2 Drink Soda
————–
Permission Number = 3 (00000011)
</code></pre>

<p>Ok now that the example people have their numbers. Let’s play fun. The math is really simple. Because each drink permission is subject to masking, I can tell by your single permission number what drinks you can drink.</p>

<p>Ordering Drinks Example(paste into irb for fun!):</p>

<pre><code>#!/usr/bin/ruby
class Rbar_Tender  #rbar_tender.rb

########################################
# The bartender. He's actually very stupid.
########################################
def self.order_drink(drink_permission,person_permission)

response = "Talk to the manager, I can't serve you now."
if (person_permission.to_i &amp; drink_permission.to_i) &gt; 0
response =  "here's your drink, thanks for your business."
end
return response
end
end #end of class

#basic permissions
drink_water = 1 #0001b
drink_soda = 2 #0010b
drink_beer = 4 #0100b
drink_gin = 8 #1000b

#people's permissions
sara_permission = 13 #1101 #assigned during walking into bar with ID.

#open for business
puts "sara wants a beer..."

#drink_beer.to_i &amp; sara_permission.to_i
puts Rbar_Tender.order_drink(drink_beer,sara_permission)

puts "\n...a minutes later....\n\n"

puts "sara wants a soda..."
#drink_soda.to_i &amp; sara_permission.to_i
puts Rbar_Tender.order_drink(drink_soda,sara_permission)
</code></pre>

<p>What is your point Hank? Well, in applications and web applications in particular, you need lot’s of permissions to do stuff. I mean literally dozens or hundreds of unique permissions:
<em>Login to your account.
</em>Delete pictures.
*Email a friend.</p>

<p>When someone wants to do something, you check that persons own record if they have access. Below are some examples of permissions you might have to look up each time for each person (NOTE looking this up takes time and resources), I’ve included a 2 exponent example beside it:</p>

<pre><code>HAS_LOGIN_ACCESS (64)
HAS_DELETE_PICTURE_ACCESS (256)
HAS_EMAIL_FRIEND_ACCESS (1024)
HAS_ABILITY_TO_INVADE_IRAQ (73,786,976,295,000,000,000)
</code></pre>

<p>——
But wouldn’t it be cooler and use a lot less typing to have a single number, say for me 19. And magically b/c of math, we know what you are permitted to do. No database look ups for each time you need to do something. Your number IS what you can do. And each time you do an ACTION, that action has it’s permission number.</p>

<p>UPDATE: 7/21/2007</p>

<p>The above idea does have one limitation. DUH! The permission numbers grow exponentially as we add permissions. Simply having 66 permissions creates the huge number for HAS_ABILITY_TO_INVADE_IRAQ above. So I will explore something like TCP with a series of 8 or 16 bit binaries and do XOR on those instead. So the above permissions would be like so:</p>

<pre><code>HAS_LOGIN_ACCESS (1000010)
HAS_DELETE_PICTURE_ACCESS (100000000)
HAS_EMAIL_FRIEND_ACCESS (10000000000)…
</code></pre>

<p>H</p>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/09/20/people-fight-back-against-phishers-and-interjerks/">People Fight Back Against Phishers and Interjerks.</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Hank Beaver</span></span>
  

 - 
        








  


<time datetime="2007-09-20T13:44:49-04:00" pubdate data-updated="true">Sep 20<span>th</span>, 2007</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/security/'>Security</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>Ok, this is a very idealistic concept. We all hate SPAM and phishing!! Would you not install an application that would attack BACK at the phishing sites? I would, damn skippy!</p>

<p>If you have not heard of Seti, or SETI do a google and come back.</p>

<p>The idea is simple. A program that runs in the background and when you are not doing anything, like a screensaver. This program will work with other computers to shutdown known phishing web sites by flooding then with web requests.</p>

<p>I can explain the technology later, but suffice, I think it might work.</p>

<p>Comments?</p>
</div>
  
  


</div>

      </article>
    
    
      <article class="span4">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/09/20/cheap-easy-simple-and-dirty-rails-background-jobs-that-dont-timeout/">Cheap - Easy - Simple - and Dirty - Rails Background Jobs That Don&#8217;t Timeout.</a></h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Hank Beaver</span></span>
  

 - 
        








  


<time datetime="2007-09-20T13:38:29-04:00" pubdate data-updated="true">Sep 20<span>th</span>, 2007</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/rails/'>Rails</a>, <a class='category' href='/blog/categories/smtp-amp-spam/'>SMTP &amp; Spam</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p>Not to toot my own horn, but you might want to read my post about my Setting pattern b/c I make use of it extensively in all my Rails code as you can see below. I do this to avoid hardcoding anything.</p>

<h1>cheap background jobs in rails</h1>

<ol>
<li>fork and exec</li>
</ol>


<h1>START RAILS CODE</h1>

<h1>in my controller</h1>

<p>touch_file = Setting.get_rails_home + &#8220;DONE&#8221; #used to debug
script_runner = &#8220;export RAILS_ENV=&#8217;#{Setting.get_rails_env}&#8217;; #{Setting.get_runner_script_path}&#8221;</p>

<h1>this controller runs an Actionmailer that batches through a VERY large list of emails.</h1>

<p>cmd = script_runner + &#8221; &#34;app = ActionController::Integration::Session.new; app.get &#8216;mailing_list_emails/blast_batch_bcc_list&#8217;&#34; &#8221;
logger.debug(&#8220;blast_background to run: [#{cmd}]&#8221;)</p>

<h1>logger.debug(&#8220;touching files to run: #{touch_file}&#8221;)</h1>

<p>fork do</p>

<h1>exec &#8220;#{cmd}&#8221;</h1>

<p>exec &#8220;echo running #{cmd} >> #{touch_file}&#8221;  #you need the quotes, because any characters like > or | need to be let through</p>

<p>end</p>

<h1>Process.wait # process wait will make the Rails process wait and the process WILL timeout in CGI.</h1>

<p>redirect_to :action => &#8220;index&#8221;</p>

<h1>END RAILS CODE</h1>

<ol>
<li>Because I am doing a fork and exec zombie process WILL be created. So use cron to fix that.
59 * * * * /home/scripts/zombie.sh &#8211;cron</li>
</ol>


<p>There are examples for the zombie.sh on the web. I used this one, thanks.
(http://www.linuxscrew.com/2007/08/17/automatic-zombie-processes-killing-shell-script/)</p>
</div>
  
  


</div>

      </article>
    
    </div>
      <div class="row">
        <ul class="pager">
          
            <li class="previous">
              <a href="/blog/page/22/">&larr; Older</a>
            </li>
          
          
            <li class="next">
              <a class="next" href="/blog/page/20/">Newer &rarr;</a>
            </li>
          
        </ul>
      </div>
  </div>
</div>


  <div id="footer-widgets">
  <div class="container">
    <div class="row">
  <div class="span3">
    <h2>recent posts</h2>
    <ul class="recent_posts">
      
        <li>
          <a href="/blog/2011/08/09/mongodb-gridfs-sanity-checks/">MongoDB GridFS Sanity Checks</a>
        </li>
      
        <li>
          <a href="/blog/2011/07/14/jruby-the-watershed-for-enterprise-ruby/">JRuby - the watershed for enterprise Ruby?</a>
        </li>
      
        <li>
          <a href="/blog/2011/01/26/chef-learnings-1-1/">Chef Learnings 1.1</a>
        </li>
      
    </ul>
    <h2><a href="/blog/archives">archives</a></h2>
  </div>
  <div class="span3">
    

  </div>
  <div class="span4">
    
<h2>twitter</h2>
<a href="https://twitter.com/blastepal" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @blastepal</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<div class="tweet" data-twitter-user="blastepal">
</div>


  </div>
  <div class="span2">
    <h2>found on</h2>

<a href="https://github.com/blasterpal/" rel="tooltip" title="Github"><img class="social_icon" title="Github" alt="github icon" src="/images/glyphicons_381_github.png"></a>







<a href="http://twitter.com/blastepal" rel="tooltip" title="Twitter"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>








  </div>
</div>

  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-left">
  <a href="/"><em>Hank Beaver</em>. <br>Web developer &<br>DevOps pro.</a>
  - Copyright &copy; 2013 - Hank Beaver
</p>
<p class="pull-right">
  <span>Powered by <a href="http://octopress.org/">Octopress</a>.</span>
  
    <span>Designed by <a href="http://www.AdrianArtiles.com">Adrian Artiles</a>.</span>
  
</p>

  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.tweet.js" type="text/javascript"></script>
<script src="/javascripts/jquery.instagram.js" type="text/javascript"></script>
<script src="/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/javascripts/custom.js" type="text/javascript"></script>




<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
