
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hank Beaver</title>
  <meta name="author" content="Hank Beaver">

  
  <meta name="description" content="I want to verify that the data is what I expect across two systems for binaries. Here&#8217;s some sanity check examples: 1) Verify fs.files object &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blasterpal.github.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Hank Beaver" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Hank Beaver</a></h1>
  
    <h2>Open-source, Internet technologist who works for BLiNQ Media located in Atlanta, GA, USA</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blasterpal.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/08/09/mongodb-gridfs-sanity-checks/">MongoDB GridFS Sanity Checks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-09T08:19:42-04:00" pubdate data-updated="true">Aug 9<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I want to verify that the data is what I expect across two systems for binaries. Here&#8217;s some sanity check examples:</p>

<p>1) Verify fs.files object count:</p>

<pre><code>mongofiles -d cms list | wc -l
</code></pre>

<p>Example output:</p>

<pre><code>connected to: 127.0.0.1
3700 
</code></pre>

<p>(should be > 3000)
2) Verify Meta data:</p>

<pre><code>&gt; db.fs.files.stats();

Example output:
{
    "ns" : "cms.fs.files",
    "count" : 3700,
    "size" : 899348,
    "storageSize" : 1196800,
    "numExtents" : 4,
    "nindexes" : 3,
    "lastExtentSize" : 901120,
    "paddingFactor" : 1,
    "flags" : 1,
    "totalIndexSize" : 966656,
    "indexSizes" : {
        "_id_" : 163840,
        "filename_1_uploadDate_-1" : 425984,
        "filename_1" : 376832
    },
    "ok" : 1
}
</code></pre>

<p>Should be same as mongofiles -d cms list | wc -l</p>

<p>3) Verify Binary data:</p>

<pre><code>&gt; db.fs.chunks.stats();

Example output:
{
    "ns" : "cms.fs.chunks",
    "count" : 13009,
    "size" : 2878929012,
    "storageSize" : 3436553216,
    "numExtents" : 28,
    "nindexes" : 2,
    "lastExtentSize" : 576252672,
    "paddingFactor" : 1,
    "flags" : 1,
    "totalIndexSize" : 1122304,
    "indexSizes" : {
        "_id_" : 548864,
        "files_id_1_n_1" : 573440
    },
    "ok" : 1
}
</code></pre>

<p>size should be > 2,500,000,000  (2.5 GB)</p>

<p>4) Save a binary from Mongo:</p>

<p>a) pick a file from list</p>

<pre><code>mongofiles -d cms list
</code></pre>

<p>b) restore it to /tmp/</p>

<pre><code>mongofiles -d cms get 'carouselimages/4bc24ba5fa7e1c75b10000d5/image/tradeshow_placeholder.jpg' -l /tmp/tradeshow_placeholder.jpg
</code></pre>

<p>View file.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/14/jruby-the-watershed-for-enterprise-ruby/">JRuby - the Watershed for Enterprise Ruby?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-14T03:18:01-04:00" pubdate data-updated="true">Jul 14<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It&#8217;s very heartening to see large and profitable examples of companies moving away from pure Java to integrating Ruby, leveraging JRuby of course. Not every situation makes sense, but as the articles below point out, developer productivity is by cheaper than some CPU cycles. But now that JRuby is becoming more viable and more event-based programming becomes norm, the performance factor of Ruby will only increase. I say quit talking about performance of Ruby, it&#8217;s becoming moot.</p>

<p><a href="http://www.youtube.com/watch?v=qZcmF3yonjs">http://www.youtube.com/watch?v=qZcmF3yonjs</a>
<a href="http://www.infoq.com/articles/linkedin-scala-jruby-voldemort">http://www.infoq.com/articles/linkedin-scala-jruby-voldemort</a></p>

<p>In the past few weeks I&#8217;ve had a few situations where integrating with Java or within JVM environments is unavoidable. JRuby is now becoming more viable for us Ruby folk. Instead of fighting against Java-centric organizations, the Ruby community who has Java experience, needs to be open to the idea of JRuby as a true platform and live in harmony with Java, Scala,etc. I think the pivot point might be here for Ruby as it relates to the enterprise.</p>

<p>Please take time to view the articles above and consider Ruby and the JVM together. And the next time a client or project emerges that mentions Java, don&#8217;t cringe, but get excited.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/26/chef-learnings-1-1/">Chef Learnings 1.1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-26T04:14:56-05:00" pubdate data-updated="true">Jan 26<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today&#8217;s topic, <a href="http://wiki.opscode.com/display/chef/Libraries">Libraries</a> and including them in multiple Cookbooks. Any custom library loaded into a single Cookbook is available to all Cookbooks within your Node. So for example, let&#8217;s say you have a custom function that operates on Data Bags (like I do), it is available to all recipes. For example, if you include in a library one of your base/default cookbooks (like IPTables), then any other recipe can access those methods. The trick is that in your first recipe where you include your custom library, you have monkey patched Chef to include it thereafter:</p>

<pre><code>class Chef::Recipe
  include DataBagHelper
end
</code></pre>

<p>So nice, now I have my custom library available everywhere. This makes me think, why not just have a custom library cookbook, or make my custom libraries part of my base/default recipe included in ALL nodes? So now I have my own methods and functionality available everywhere.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/01/chef-learnings-1-0/">Chef Learnings 1.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-01T10:31:48-05:00" pubdate data-updated="true">Dec 1<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sitting with Seth from <a href="http://www.opscode.com">Opscode</a> today drinking some coffee. He pointed out a couple of things, I&#8217;d like to share.</p>

<ol>
<li><p>Learn how to use <a href="http://wiki.opscode.com/display/chef/Shef">Shef</a>, to inspect node. It replaces &#8216;debug&#8217; statements when doing runs in templates or recipes.</p>

<p> &#8216;shef -z&#8217;</p></li>
<li><p>If using <a href="http://wiki.opscode.com/display/chef/Knife">Kinfe</a> and a node is acting funny, inspect it via show or edit. For example, you might have to manually edit a run list or a default set of attributes that are an array instead of a hash (both real examples).</p></li>
<li>Stop using symbols for hash keys in recipes, cookbooks, etc. The Opscode default will be a double quoted string and older versions can just not work.</li>
<li>Upgrade to latest chef when overrides are not behaving as desired correctly OR override all the attributes for a recipe (even one&#8217;s you don&#8217;t want to override) if you are &lt; 0.9.10. However, the latter solution is obviously less desirable.</li>
</ol>


<p>That&#8217;s all for now.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/17/easysuper-funny-recipe/">Easy,super Funny Recipe</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-17T14:21:50-05:00" pubdate data-updated="true">Nov 17<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A wonderful winter treat, sure to deliver fun and scolding!</p>

<p>Required: children,2 thermometers for both purposes, a spouse who wants his/her temp. checked.
Execute Fun: give them thermometer, right as thermometer touches tongue, say, with a little hesitation and urgency at once, &#8216;oh , wait&#8230;&#8217;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/28/tonight-a-dream/">Tonight, a Dream</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-06-28T18:24:41-04:00" pubdate data-updated="true">Jun 28<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This weekend Jill, Jude and I visited Chris Kenney to watch his band perform on his front porch in Villa Rica. To say Chris plays guitar well is an understatement. I&#8217;ve Spent time with him and now witnessed him play electric. For his set, he clearly had a distinct style.
Jill thought he might be offended by this but I could close my eyes and clearly hear Joe Satriani. And it got me recalling my days of listening to him on cassette with my Sony Walkman with a 3 band graphic EQ. Thanks Chris.</p>

<p><a href="Http://www.youtube.com/watch?v=U-zjnVmuTzs&amp;feature=youtube_gdata">flying in a blue dream</a></p>

<p>I was taken back to when I was in high school and playing guitar was the only thing that mattered to me. I was neither a jock nor a band geek, I was a lone guitar guy in high school it seemed. Where now everyone plays. Not in blairsville did they in 1987.</p>

<p>So much of our lives change from adolescence and for the most part our dreams of ourselves are sucked into the vortex of responsibility.</p>

<p>For the rare few who escape this, I send this song. It is not cool by many standards but I have no shame. It is just what I held at the time to be my dream to make music like this. Thus the irony of the title.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/19/my-perfect-music-creation-platform/">My Perfect Music Creation Platform</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-04-19T15:55:35-04:00" pubdate data-updated="true">Apr 19<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve kept this blog purely in the programming realm and today I shall diverge from this. I have been a musician for many years prior to becoming a programmer. Today&#8217;s topic will revolve around computer-based music software.</p>

<p>For sometime I&#8217;ve become more and more frustrated with my Tracking and Sequencing setup. Secondly, my plugins and just all around workflow were lacking. I really don&#8217;t have time to sort through lists of plugins that are mediocre or get frustrated when my program would suddenly crash ( I am omitting the tracking/sequencer I use, because it doesn&#8217;t matter anymore to me).</p>

<p>I did have two pieces of plugin software I love that I carried over, everything else was tossed away:</p>

<p>MOTU Symphonic Instrument
Toontracks EZDrummer</p>

<p>What I found to be very surprising is that refactoring (sorry for programming term) my entire songwriting and music creation setup didn&#8217;t take much cash nor time at all. In fact, most of it was free and I did it last weekend out of frustration of one last crash when a song was in my head.</p>

<p>To be fair, everyone has different needs.. These were the same before I started this endeavor.</p>

<p><strong>CRITERIA/NEEDS:</strong></p>

<p>1) I want to have a &#8216;rock&#8217; template ready to go loaded with everything, including plugins.
2) I want to said template record ready for guitar or bass on separate tracks.
3) Drums are ready to go in a MIDI track.<br/>
4) Setup is robust and quick.
5) It can&#8217;t cost a lot, I do this for fun.</p>

<p>I am focused on music that varies in a few styles, but can be classified as college rock, indie rock, post-punk, experimental and also for scoring films.</p>

<p>The most important piece of all of this is the tracking and sequencing. I thought for certain I&#8217;d have to shell out some cash to find something. The last time I looked there were no viable options for OSX that did both from what I saw. This weekend I stumbled upon a few that did. I chose Reaper (www.cockos.com/reaper/).</p>

<p>Reaper caught my eye immediately when I learned a guy from earlier versions of Winamp was on the very,very small team in San Francisco called Cockos (www.cockos.com). Their software is very intriguing and they have some innovative ideas. In particular Jesusonic (http://www.jesusonic.com/) which is basically a PC or Mac software system for creating your own effects/stomp box system. Take a look at the site and you&#8217;ll see. The upside for Reaper is that all the Jesusonic plugins are included.</p>

<p>The only glitch had to do with a plugin not in the below list that made random noise. I will report on this later.</p>

<p>So enough with all the talk, here is the list of software that I&#8217;m using and am very happy to report I&#8217;ve had no crashes and am feeling like I will be more creating soon.</p>

<p><strong>TRACKING/SEQUENCING</strong> (very,very affordable): <br/>
Reaper
http://reaper.fm/</p>

<p><strong>REVERB</strong> (FREE):      <br/>
LVImpulse
http://audio.lernvall.com/</p>

<p>There are normal reverbs included with Reaper, but to get a very natural room/hall sound for drums, mix, etc. I think impulse reverbs are they way to go. Grab some for the plugin above using these links. You need interleaved WAV files so be aware of that.</p>

<p><strong>Impulses</strong> (FREE):
http://www.1-1-1-1.net/pages/impulses/index.htm#mpx1
http://www.xs4all.nl/~fokkie/IR.htm#smallfactoryhall
http://noisevault.com/nv/index.php?option=com_remository&Itemid;=29&func;=selectcat&cat;=17&page;=1
http://www.irlibrary.org/
http://www.macosxaudio.com/forums/viewtopic.php?t=14100</p>

<p><strong>GUITAR/BASS AM</strong>P (FREE for 1 year):     <br/>
Waves GTR Solo 3
http://www.wavesgtr.com/html/product_gtr_solo.html</p>

<p>This is a Waves product that is free for a year and $145 thereafter. It sounds amazing. I&#8217;ll ride that pony for a year and then figure something out later. The install is a little arduous, but worth it.</p>

<p><strong>BAD ASS SYNTH AND OTHER</strong> (FREE):
MRAlias2
http://www.thepiz.org/mralias2/</p>

<p>This plugin surprised me. I was wrapping up for the night and stumbled upon it. This will be my goto plugin for synths and synth-effects for some time.</p>

<p><strong>OTHER INSTRUMENTS</strong>:
MOTU Symphonic Instrument       <br/>
http://www.motu.com/products/software/msi/</p>

<p>I mentioned earlier, I score for film. I also enjoy adding some strings or a realistic piano to an arrangement. When I bought this in 2005-ish it was one of the best out there. This may not be the case for the money now, but I recommend you give it a listen.</p>

<p><strong>BAD ASS DRUM</strong>S (not free, worth the money):  <br/>
Toontracks EZDrummer Vintage Rock EZX
http://www.toontrack.com/products.asp?item=9 (need EZDrummer too)</p>

<p>Last but not least are the all important drums. If you are trying to create organic music in your home that sounds akin to real band, you need a realistic drums. Jordan from Snowden, while he may not recall, turned me on to EZDrummer. By itself, the built in sounds are very good, the beats are not close to what I like and I have to tweak them. However, if you also shell out the cash and get the Vintage Rock drums too, you will find John Bonham (and others) in a box. I rest my case.</p>

<p><strong>HARDWARE</strong>:
MacBook 2.4 Ghz, 4GB Ram</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/11/02/testing-varnish-vcl-syntax/">Testing Varnish VCL Syntax</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-11-02T07:15:00-05:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The simplest way to test syntax is to use the administration console via telnet on a Dev/QA Varnish machine. Your current running Varnish should allow your IP/localhost to connect if you have implemented a Varnish ACL.</p>

<ul>
<li><p>Start up Varnish with single command-line</p></li>
<li><p>Login to console via telnet</p></li>
<li><p>Load the config you wish to test</p></li>
<li><p>Use the config.</p></li>
</ul>


<p>On OSX:</p>

<pre><code>sudo /usr/local/sbin/varnishd -F  -a localhost:3000 -b localhost:6081 -T localhost:6082
</code></pre>

<p>From another console/shell/ open connection to Varnish management console:</p>

<pre><code>telnet localhost 6082
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
</code></pre>

<p>Load config and try to use (the config used in this example has a syntax problem. Therefore, you will see compilation errors:</p>

<pre><code>vcl.load error /Users/hbeaver/code/varnish_demo/config/syntax_error.vcl  
106 181     
Message from VCC-compiler:
Expected one of
    'acl', 'sub', 'backend',  or 'director'
Found: '}' at
(input Line 12 Pos 1)
}
#
Running VCC-compiler failed, exit 1VCL compilation failed
</code></pre>

<p>Conversely, if the VCL has good syntax you should see no errors:</p>

<pre><code>vcl.load good_config /Users/hbeaver/code/varnish_demo/config/default.vcl 
200 13      
VCL compiled.
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/10/15/starting-specific-version-of-thin-web-server/">Starting Specific Version of Thin Web Server</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-15T02:40:37-04:00" pubdate data-updated="true">Oct 15<span>th</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You may find yourself needing to test something with a specific version of thin, for whatever reason. If you need start up thin with a specific version of gem you have installed this is how you do it:</p>

<pre>thin _1.2.4_ -R config.ru -p 3001 start</pre>


<p>The first argument represents the gem version prefixed and post-fixed with &#8220;_&#8221;.</p>

<p>Enjoy.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2009/10/01/beware-ye-rspec-ers-params/">Beware Asserting Against Rspec @params</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-10-01T02:40:43-04:00" pubdate data-updated="true">Oct 1<span>st</span>, 2009</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Spent a little time scratching my head on this week. @params is reserved in Rspec controller tests apparently much like Rails. @params will contain extra keys like &#8220;controller&#8221; and &#8220;action&#8221; which if you try and assert against will fail of you do something like this:</p>

<pre>

@params = {:id => 'niceid'}
...
Model.expects(:method).with(@params)

</pre>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/08/09/mongodb-gridfs-sanity-checks/">MongoDB GridFS Sanity Checks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/14/jruby-the-watershed-for-enterprise-ruby/">JRuby - the watershed for enterprise Ruby?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/01/26/chef-learnings-1-1/">Chef Learnings 1.1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/12/01/chef-learnings-1-0/">Chef Learnings 1.0</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/17/easysuper-funny-recipe/">Easy,super funny recipe</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Hank Beaver -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
